</div>

<footer id="footer" class=" modern footer_bg">
	<div class="container no-padd">
		<div class="widg clearfix">
			<div id="instagram_widget-2" class="sidebar-item col-xs-12 col-sm-6 col-md-3 AwaInstagramWidget"><div class="item-wrap">
				<div class="quze-widget-user quze-widget-border-bottom">
					<img src="img2/logo_ibrand/brand__logo__white.png" alt="iBrand Africa" class="insta-logo">
					<div class="instagram-text"><span>follow us on </span>
						<a href="https://www.instagram.com/ibrandafricagroup/" target="_blank">iBrand Africa Group</a>
					</div>
				</div>
			</div>
			</div>
			<div id="text-2" class="sidebar-item col-xs-12 col-sm-6 col-md-3 widget_text"><div class="item-wrap">
				<h5>Wanna say hello?</h5>
				<div class="textwidget">
					<p><a href="email:info@ibrandafrica.com"><span>info@ibrandafrica.com</span></a></p>
					<p><a href="tel:+2348021260000">(+234) 8021260000</a></p>
				</div>
			</div>
			</div>
			<div id="nav_menu-2" class="sidebar-item col-xs-12 col-sm-6 col-md-3 widget_nav_menu">
				<div class="item-wrap">
					<h5>explore</h5>
					<div class="menu-footer-menu-container">
						<ul id="menu-footer-menu" class="menu">
							<li id="menu-item-198" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-198">
								<a href="/about">About us</a>
							</li>
							<li id="menu-item-197" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-197">
								<a href="/contact">Contact us</a>
							</li>
							<li id="menu-item-105" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105">
								<a href="/works">Works</a>
							</li>
							<li id="menu-item-199" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-199">
								<a href="/services">Services</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="text-3" class="sidebar-item col-xs-12 col-sm-6 col-md-3 widget_text">
				<div class="item-wrap">
					<h5>Office</h5>
					<div class="textwidget">
						<p>#4 Amadi-ama Trans-Amadi Industrial Layout, Port Harcourt, Nigeria</p>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xs-12 footer-socials text-center col-sm-6">
			<a href="https://www.facebook.com/" target="_blank">
				<i class="fa fa-facebook-square"></i>
			</a>
			<a href="https://twitter.com/" target="_blank">
				<i class="fa fa-twitter"></i>
			</a>
			<a href="https://www.instagram.com/" target="_blank">
				<i class="fa fa-instagram"></i>
			</a>
			<a href="https://dribbble.com/" target="_blank">
				<i class="fa fa-dribbble"></i>
			</a>
		</div>
		<div class="copyright col-xs-12 text-center col-sm-6">Â©iBrand Africa, Copyright by
			<a href="http://ibrandafrica.com/">iBrandafrica.com</a>
		</div>
	</div>
</footer>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.3.2/js/lightgallery.js"></script>
<!--&lt;!&ndash;<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>&ndash;&gt;-->
<!--<script src="https://www.youtube.com/iframe_api"></script>-->
<script src="js/lib/modernizr-2.6.2.min.js"></script>
<script src="js/lib/scripts.js"></script>
<script src="js/jquery.countdown.min.js"></script>
<script src="js/foxlazy.js"></script>
<script src="js/jquery.easings.min.js"></script>
<script src="js/jquery.multiscroll.min.js"></script>
<script src="js/magnific.js"></script>
<script src="js/TweenMax.min.js"></script>
<script src="js/equalHeightsPlugin.js"></script>
<script src="js/jquery.fancybox.min.js"></script>
<script src="js/jquery.fitvids.js"></script>
<script src="js/swiper3.js"></script>
<script src="js/imagesloaded.pkgd.min.js"></script>
<script src="js/fragment.js"></script>
<script src="js/scrollMonitor.js"></script>
<script src="js/slider-transition.js"></script>
<script src="js/slick.js"></script>
<script src="js/jquery.sliphover.min.js"></script>
<script src="js/pixi.min.js"></script>
<script src="js/parallax.js"></script>
<script src="js/typed.js"></script>
<script src="js/headings.js"></script>
<script src="js/nprogress.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.min.js"></script>
<script src="js/jquery.steps.min.js"></script>
<script src="js/app.js"></script>

<script>
	NProgress.start();
	NProgress.set(0.4);
	//Increment
    // Increase randomly
    let interval = setInterval(() => { NProgress.inc(); }, 1000);

    // Trigger finish when page fully loaded
    $(window).load(() => {
        clearInterval(interval);
        NProgress.done();
    });

    // Trigger bar when exiting the page
    $(window).unload(() => {
        NProgress.start();
    });
</script>
<script>
	let page = window.location.pathname;
	const urlParams = new URLSearchParams(window.location.search);
	let endpoint = 'https://branding-service.herokuapp.com/api/';
	let home = ['/', '/ibrandafrica/', 'http://ibrandafrica.com'];
	let mainlogo = document.querySelector('.main-logo');
	let hoverlogo = document.querySelector('.logo-hover');
	const loading = document.querySelector('.loading');

	// Create a new script tag and pass src for each Route
	const createTag = function(tagName, source, nodeLoc, insertTag, async) {
		let tag = document.createElement(tagName);
		let t = document.getElementsByTagName(insertTag)[nodeLoc];
		if (tagName === 'link'){
			tag.rel = 'stylesheet';
			tag.href = source;
		}
		if (source === 'js/instagram.js'){
			tag.type = 'module';
			tag.src = source;
		} else {
			// tag.type = 'text/javascript';
			tag.async = async;
			tag.src = source;
		}
		t.parentNode.insertBefore(tag, t);
	};
	switch (page) {
		case home[1]:
			// FOR SCRIPTS
			new createTag('script', 'js/instagram.js', 19, 'script', true);
			new createTag('script', 'js/team.js', 20, 'script', true);
			new createTag('script', 'js/lightgallery.min.js', 28, 'script', true);
			new createTag('script', 'js/services.js', 29, 'script', false);
			new createTag('script', 'lib/swiper-master/package/js/swiper.min.js', 30, 'script', true);

			// FOR LINKS
			new createTag('link', 'css/lightgallery.min.css', 16, 'link', true);
			// new createTag('link', 'css/banner_slider.min.css', 17, 'link', true);
			// new createTag('link', 'css/headings.min.css', 18, 'link', true);
			new createTag('link', 'css/info_block.min.css', 19, 'link', true);
			new createTag('link', 'css/services.min.css', 20, 'link', true);
			new createTag('link', 'css/team.min.css', 21, 'link', true);
			new createTag('link', 'css/the_grid.min.css', 22, 'link', true);
			new createTag('link', 'css/services_list.min.css', 23, 'link', true);
			// new createTag('link', 'css/line_of_images.min.css', 24, 'link', true);
      new createTag('link', 'css/banner_image.min.css', 25, 'link', true);
			new createTag('link', 'lib/swiper-master/package/css/swiper.min.css', 26, 'link', true);
			break;

		case '/ibrandafrica/about':
			// FOR SCRIPTS
			new createTag('script', 'js/banner_slider.js', 25, 'script', false);
			new createTag('script', 'js/countTo.js', 26, 'script', false);
			new createTag('script', 'js/skills.js', 27, 'script', false);
			new createTag('script', 'js/team.js', 28, 'script', false);
			new createTag('script', 'js/info_block.js', 29, 'script', false);

			// FOR LINKS
			new createTag('link', 'css/the_grid.min.css', 16, 'link', false);
			new createTag('link', 'css/banner_image.min.css', 17, 'link', false);
			new createTag('link', 'css/services.min.css', 18, 'link', false);
			new createTag('link', 'css/magnific-popup.css', 19, 'link', false);
			new createTag('link', 'css/video_btn.min.css', 20, 'link', false);
			new createTag('link', 'css/skills.min.css', 21, 'link', false);
			new createTag('link', 'css/team.min.css', 22, 'link', false);
			mainlogo.src = 'img2/logo_ibrand/brand__logo__white.png';
			hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

			;(async ()=> {

				await fetch(endpoint + 'team')
				.then(response => response.json())
				.then(data => {

					data.forEach(member => {
						$('#members').append(`
							<div class="team-member clearfix col-3 col-xs-12 col-sm-6 col-md-4" onclick="">
								<div class="member-wrap">
									<img src="${member.image}" class="s-img-switch" alt="" />
									<div class="member-info-wrap">
										<div class="member-info">
											<h5 class="member-name">${member.fullname}</h5>
											<div class="member-position">${member.position}</div>
										</div>
										<div class="social">
											<a href="https://www.facebook.com/ibrandafricagroup" target="_blank" class="soc-item">
												<i class="fa fa fa-facebook-square"></i>
											</a>
											<a href="https://twitter.com/ibrandafricagroup" target="_blank" class="soc-item">
												<i class="fa fa fa-twitter"></i>
											</a>
											<a href="https://www.instagram.com/ibrandafricagroup" target="_blank" class="soc-item">
												<i class="fa fa fa-instagram"></i>
											</a>
										</div>
									</div>
								</div>
							</div>
						`)
					})
				})
			})()
			break;

		case '/ibrandafrica/works':
			new createTag('script', 'js/lightgallery.min.js', 22, 'script', false);
			new createTag('script', 'js/lib/thumbnails-popup.js', 23, 'script', false);
			new createTag('script', 'js/banner_slider.js', 26, 'script', false);

			// FOR LINKS
			new createTag('link', 'css/banner_image.min.css', 15, 'link', false);
			new createTag('link', 'css/lightgallery.min.css', 16, 'link', false);
			new createTag('link', 'css/instagram.min.css', 17, 'link', false);
			mainlogo.src = 'img2/logo_ibrand/brand__logo__white.png';
			hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

			fetch(endpoint + 'clients')
				.then(res => res.json())
				.then((data) => {
					let output = '';
					data.forEach(client => {
						output += `<a href="${location.origin+"/ibrandafrica/work-client?q="+client.slug}" class="insta-item col-xs-12 col-sm-6 col-md-4 no-padd">
						<img src="${client.sliders[0]}" alt="ibrandafrica-${client.name}">
						<span class="info-hover"><i><h2 class="font-weight-bold">${client.name}</h2></i></span>
						</a>`
					});
					$('#ibrandworks').append(output);
				})
					.then(() => loading.hidden = true)
				.catch(error => {
					swal({
						title: "Error!",
						text: error.message,
						icon: "error",
					})
				});

			break;

		case '/ibrandafrica/work-client':
			new createTag('script', 'js/lightgallery.min.js', 15, 'script', false);
			new createTag('script', 'js/lib/thumbnails-popup.js', 16, 'script', false);
			new createTag('script', 'js/script.js', 27, 'script', false);

			// FOR LINKS
			new createTag('link', 'css/lightgallery.min.css', 16, 'link', false);
			mainlogo.src = 'img2/logo_ibrand/brand__logo__white.png';
			hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

			const params = urlParams.get('q');

			fetch(endpoint +'client?q='+params)
				.then(res => res.json())
				.then(data => {
					let errorPage_output = '';
					let sliders_output = '';
					let projectImage_output = '';

					if (data == null){
						errorPage_output += `<h3 class="text-center font-weight-bold text-light">No client found with this: (${params})</h3>`;
						$('#errorPage').append(errorPage_output);
						document.body.style.backgroundColor = '#26376e';
						$('div#errorPage').css('margin-top', '10%');
						return;
					}

					data.sliders.forEach(img => {
						sliders_output += `<div class="swiper3-slide">
						<div class="image-wrap">
						<img src="${img}" class="s-img-switch" alt="ibrandfrica works" />
						</div>
						</div>`
					});

					data.projectImages.forEach(project => {
						projectImage_output += `<a href="${project.image}" class="item-single gallery-item insta-item">
						<img src="${project.image}" class="" alt="${project.type}" />
						</a>`
					});

					let descWrapper = `<div class="info-wrap">
						<div class="date">${data.projectDate}</div>
						<div class="info-item-wrap">
						<div class="item">
						<div class="name">Clients</div>
						<div class="text-item"><a href="#" rel="tag">${data.name}</a></div>
						</div>
						</div>
						</div>
						<div class="text-wrap">
						<h3 class="title">${data.name}</h3>
						<div class="text">
						<p>${data.desc}</p>
						</div>
						<div class="btn-wrapper">
						<a href="${data.clientLink}" target="_blank" class="a-btn">Visit website</a>
						</div>
						</div>`;

					$('#sliders').append(sliders_output);
					$('#projectImages').append(projectImage_output);
					$('#desc').append(descWrapper);
				})
					.then(() => loading.hidden = true)
					.catch(error => {
						swal({
							title: "Error!",
							text: error.message,
							icon: "error",
						})
					});

			$('#getNext').on('click', () => {
				return new Promise(async (resolve, reject) => {
					await fetch(endpoint +'clients')
						.then(res => res.json())
						.then(data => {
							let pages = [];
							let nextItem;
							for (let key in data){
								pages.push(data[key].slug);
							}

							let currentPage = data.filter(c => params === c.slug);

							let index = pages.indexOf(currentPage[0].slug);
							if(index >= 0 && index < pages.length - 1){
								nextItem = pages[index + 1]
							}
							resolve(true);
							getCurrentURL(nextItem);
						})
							.then(() => loading.hidden = true)
							.catch(error => {
								swal({
									title: "Error!",
									text: error.message,
									icon: "error",
								})
								reject(error)
							})
				})
			});

			$('#getPrevious').on('click', () => {
				return new Promise(async (resolve, reject) => {
					await fetch(endpoint +'clients')
							.then(res => res.json())
							.then(data => {
								let pages = [];
								let previousItem;
								for (let key in data){
									pages.push(data[key].slug);
								}

								let currentPage = data.filter(c => params === c.slug);

								let index = pages.indexOf(currentPage[0].slug);
								if (index >= 0 && index < pages.length - 1) {
									previousItem = pages[index - 1]
								}
								resolve(true);
								getCurrentURL(previousItem);
							})
							.then(() => loading.hidden = true)
							.catch(error => {
								swal({
									title: "Error!",
									text: error.message,
									icon: "error",
								})
								reject(error)
							})
				})
			});

			function getCurrentURL(p) {
				window.location.assign(location.pathname+'?q='+p);
			}
			break;

		case '/ibrandafrica/services':
			// FOR SCRIPT
			new createTag('script', 'js/info_block.js', 25, 'script', false);
			new createTag('script', 'js/services.js', 26, 'script', false);
			new createTag('script', 'js/parallax.lib.js', 27, 'script', false);

			// FOR LINKS
			new createTag('link', 'css/services.min.css', 15, 'link', false);
			new createTag('link', 'css/info_block.min.css', 16, 'link', false);
			new createTag('link', 'css/call_to_action.min.css', 17, 'link', false);
			// OTHER LINKS
			new createTag('link', 'css/contacts.min.css', 18, 'link', false);
			new createTag('link', 'css/headings.min.css', 19, 'link', false);
			// mainlogo.src = 'img2/logo_ibrand/brand__logo__white.png';
			hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

			;(async() => {
				await fetch(endpoint + 'services')
				.then(response => response.json())
				.then(data => {
					data.forEach(service => {
						$('#services').append(`<div class="col-sm-6 col-lg-4 col-md-4 col-xs-12 margin-xs-50b margin-sm-50b">
							<a href="?q=${service.slug}">
								<div class="services classic">
									<div class="img-wrap">
										<img src="${service.image}" class="s-img-switch" alt="${service.name}" />
									</div>
									<div class="content ">
										<h4 class="title">${service.name}</h4>
										<div class="text">${truncate(service.desc, 80)}<br />
										</div>
									</div>
								</div>
							</a>
						</div>`)
					})
				})
				.then(() => loading.hidden = true)
				.catch(error => {
					swal({
						title: "Error!",
						text: error.message,
						icon: "error",
					})
				})


				// check if query is set
				let paragraphs = '';
				let slug = urlParams.get('q');
				let keyword = urlParams.get('search');
				if (urlParams.has('q')) {

					await fetch(endpoint + 'service/' + slug)
					.then(response => response.json())
					.then(data => {
						console.log(data);
						$('#service').append(`
						<div class="col-sm-6 col-md-5 col-lg-6" style="padding: 0">
							<img src="${data.image}" alt="${data.name}">
							<div class="text-right-wrap" style="padding: 4em">
								<h2 class="text">Do you want<br/>something similar?</h2>
								<div class="">
									<a href="project?q=${data.name}" class="a-btn">Start Project</a>
								</div>
							</div>
						</div>
					  <div class="col-sm-6 col-md-5 offset-md-2 col-lg-6 offset-lg-0 mt-5">
							<div class="container" style="margin-top: 10em; padding: 0 80px">
								<h1 class="text font-weight-bold">${data.name}</h1>
								<div class="text-wrapper">
									<p class="lead">${data.desc}</p>
								</div>
								<div id="paragraphs">
								</div>
							</div>
						</div>
						`)

						data.longdesc.forEach(paragraph => {
							paragraphs += `<p>${paragraph}</p>`;
						})
						$('#paragraphs').append(paragraphs);
					})
				}

				if (urlParams.has('search')) {

					await fetch(endpoint + 'service?search=' + keyword)
					.then(response => response.json())
					.then(data => {
						console.log(data);

						if (data.length > 0) {
							data.forEach(service => {
								$('#searched_services').append(`<div class="col-sm-6 col-lg-4 col-md-4 col-xs-12 margin-xs-50b margin-sm-50b">
									<a href="?q=${service.slug}">
										<div class="services classic">
											<div class="img-wrap">
												<img src="${service.image}" class="s-img-switch" alt="${service.name}" />
											</div>
											<div class="content ">
												<h4 class="title">${service.name}</h4>
												<div class="text">${truncate(service.desc, 80)}<br />
												</div>
											</div>
										</div>
									</a>
								</div>`)
							})
						} else {
							$('#serviceHeader').hide();
							$('#searched_services').append(`
								<div class="row">
									<div class="col-xs-12">
										<div class="headings style2">
											<div class="content">
												<div class="info">
													<h2 class="title" style="color:#222222">No result found with the keyword ${keyword}</h2>
												</div>
											</div>
										</div>
									</div>
								</div>
							`)
						}
					})
					console.log('searched initialized');
				}
			})()

			function truncate(str, n){
			  return (str.length > n) ? str.substr(0, n-1) + '&hellip;' : str;
			};

			break;

		case '/ibrandafrica/contact':
			new createTag('script', 'js/parallax.lib.js', 25, 'script', false);

			// FOR LINKS
			new createTag('link', 'css/contacts.min.css', 15, 'link', false);
			new createTag('link', 'css/headings.min.css', 16, 'link', false);
			hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

			const contactForm = document.getElementById('contactForm');
			const sendBtn = document.getElementById('sendBtn');

			contactForm.addEventListener('submit', function(e) {
				e.preventDefault();
				sendBtn.innerText = 'Please Wait...';
				sendBtn.setAttribute('disabled', true);
				const formData = new FormData(e.target);
				const data = new URLSearchParams();

				for (var pars of formData) {
						data.append(pars[0], pars[1])
				}

				return new Promise(async (resolve, reject) => {
					await fetch(endpoint + 'client/contact', {
						method: 'POST',
						body: data
					})
					.then(response => {
						if (response.status == 400){
							reject(response);
							swal({
								title: "Error!",
								text: response.statusText,
								icon: "error",
							});
						}else {
							resolve(response)
							swal({
							  title: "Well Done!",
							  text: "You are doing well!",
							  icon: "success",
							});
						}
					})
					.then(() => {
						sendBtn.innerHTML = '<i class="fa fa-envelope"></i> Send Message';
						sendBtn.removeAttribute('disabled');
					})
					.catch(error => {
						swal({
							title: "Error!",
							text: error.message,
							icon: "error",
						});
					})
				})
			})
			break;

			case '/ibrandafrica/project':
				new createTag('script', 'js/parallax.lib.js', 25, 'script', false);

				// FOR LINKS
				new createTag('link', 'css/contacts.min.css', 15, 'link', false);
				new createTag('link', 'css/headings.min.css', 16, 'link', false);
				hoverlogo.src = 'img2/logo_ibrand/brand__logo.png';

				$('#profile-form').validate();
				$('#jquery-steps').steps({
				    headerTag: "h3",
				    bodyTag: "section",
				    transitionEffect: "slideLeft",
				    onStepChanging: function (event, currentIndex, newIndex)
				    {
				      if (newIndex<currentIndex){
				        return true;
				      }
				      var form=$('.body.current form');
				      if (form.length==1){
				        form.validate().settings.ignore = ":disabled,:hidden";
				        return form.valid();
				      }
				      return true;
				    },
				    onFinishing: function (event, currentIndex)
				    {

				      var form=$('.body.current form');
				      if (form.length==1){
				        form.validate().settings.ignore = ":disabled";
				        return form.valid();
				      }
							console.log(form);
				      return true;
				    },
				    onFinished: async function (event, currentIndex)
				    {
							payload = {
								projectname: $('[name=projectname]').val(),
								desc: $('[name=desc]').val(),
								firstname: $('[name=firstname]').val(),
								lastname: $('[name=lastname]').val(),
								email: $('[name=email]').val(),
								phone: $('[name=phone]').val()
							}

							await fetch(endpoint + 'client/project', {
								method: 'POST',
								headers: {
						      'Content-Type': 'application/json'
						    },
								body: JSON.stringify(payload)
							})
							.then(response => {
								if (response.status == 400){
									Promise.reject(response);
									swal({
										title: "Error!",
										text: response.statusText,
										icon: "error",
									});
								}else {
									Promise.resolve(response)
									swal({
									  title: "You're doing well!",
									  text: "You will hear from us shortly",
									  icon: "success",
									})
									.then(() => location.reload());
								}
							})
							.catch(error => {
								swal({
									title: "Error!",
									text: error.message,
									icon: "error",
								});
							})
				    }
				});
			break;

		default:
			console.log(page);
	}

	;(async() => {
		await fetch(endpoint + 'services')
		.then(response => response.json())
		.then(data => {
			data.forEach(service => {
				$('#headerServices').append(`<p>${service.name}</p>`)
			})
		})
		.catch(error => {
			swal({
				title: "Error!",
				text: error.message,
				icon: "error",
			})
		})
	})()
</script>

</body>

</html>
